#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                metis.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (SOURCE) verify basic source functionality                                                                                                                               ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                               
     local    create working/return variable       - - - - - - - - - - - - -   tSOURCE  *x_source = NULL;                                                                                                                                                                                                 

   COND  (0)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     0                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify searches with zero data                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_HEAD    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_name        "/tmp/metis"  , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify adding a major                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/tmp/metis.good_stuff"           , 'y'          , &x_source                                          i_equal     0                                                                                                    

   COND  (1)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     1                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /tmp/metis.good_stuff                     0  -åæ                      -åæ                                             
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify by index                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff
     exec     call find                            metis_source_by_index       1             , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify by cursor                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_cursor      YDLST_HEAD    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                                     
     exec     call find                            metis_source_by_cursor      YDLST_NEXT    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_TAIL    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                                     
     exec     call find                            metis_source_by_cursor      YDLST_PREV    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify by name                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_name        "/tmp/metis.good_stuff"           , &x_source                                                         i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                                     
     exec     call find                            metis_source_by_name        "third"                           , &x_source                                                         i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



# end-of-file.  done, finito, completare, whimper [Ï´···
