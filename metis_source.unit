#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                metis.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (SOURCE) verify basic source functionality                                                                                                                               ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                               
     local    create working/return variable       - - - - - - - - - - - - -   tSOURCE  *x_source = NULL;                                                                                                                                                                                                 

   COND  (0)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     0                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify searches with zero data                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_HEAD    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_name        "/tmp/metis"  , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify adding a major                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/tmp/metis.good_stuff"           , 'y'          , &x_source                                          i_equal     0                                                                                                    

   COND  (1)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     1                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /tmp/metis.good_stuff                     0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify by index                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_index       1             , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify by cursor                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_cursor      YDLST_HEAD    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_cursor      YDLST_NEXT    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_TAIL    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_cursor      YDLST_PREV    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify by name                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_name        "/tmp/metis.good_stuff"           , &x_source                                                         i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_name        "third"                           , &x_source                                                         i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       attempt to add with bad names                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             NULL                              , '-'          , &x_source                                          i_lesser    0                                                                                                    
     exec     call add                             metis_major_new             ""                                , '-'          , &x_source                                          i_lesser    0                                                                                                    

   COND       attempt to add with pointer                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "second"                          , '-'          , NULL                                               i_lesser    0                                                                                                    
     code     ... set pointer                      - - - - - - - - - - - - -   x_source = 0x123456;                                                                                                                                                                                                       
     exec     call add                             metis_major_new             "second"                          , '-'          , &x_source                                          i_lesser    0                                                                                                    

   DITTO (1)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify adding a few more                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/home/system/yJOBS.description"  , 'y'          , &x_source                                          i_equal     0                                                                                                    
     exec     call add                             metis_source_new            "/home/monkey/arachne"            , 'y'          , &x_source                                          i_equal     0                                                                                                    

   COND  (2)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       verify by index                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.014))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       -1            , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/monkey/arachne                                                                                 
     exec     call find                            metis_source_by_index       2             , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_index       3             , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       verify by cursor foreward                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_cursor      YDLST_HEAD    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/monkey/arachne                                                                                 
     exec     call find (BOOM)                     metis_source_by_cursor      YDLST_PREV    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_NEXT    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/system/yJOBS.description                                                                       
     exec     call find                            metis_source_by_cursor      YDLST_NEXT    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                

   COND       verify by cursor backward                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_cursor      YDLST_TAIL    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find (BOOM)                     metis_source_by_cursor      YDLST_NEXT    , &x_source                                                                             i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    
     exec     call find                            metis_source_by_cursor      YDLST_PREV    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/system/yJOBS.description                                                                       
     exec     call find                            metis_source_by_cursor      YDLST_PREV    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/monkey/arachne                                                                                 

   COND       verify by cursor current                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.017))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_cursor      YDLST_CURR    , &x_source                                                                             i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/monkey/arachne                                                                                 

   COND       verify by name                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.018))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_name        "/tmp/metis.good_stuff"           , &x_source                                                         i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /tmp/metis.good_stuff                                                                                
     exec     call find                            metis_source_by_name        "/home/system/yJOBS.description"  , &x_source                                                         i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source->path                                                                                        s_equal     /home/system/yJOBS.description                                                                       
     exec     call find                            metis_source_by_name        "/tons/of/stuff"                  , &x_source                                                         i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_source                                                                                              p_null      0                                                                                                    

   COND       attempt to add a duplicate                                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.019))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/home/system/yJOBS.description"  , 'y'          , &x_source                                          i_equal     1                                                                                                    

   DITTO (2)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.020))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify wrapping up                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.021))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call wrap                            metis_source_wrap                                                                                                                 i_equal     0                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.022))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.023))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (SOURCE) verify hooking and unhooking tasks with sources                                                                                                                 ((02.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                               
     local    create working/return variable       - - - - - - - - - - - - -   tSOURCE  *x_source = NULL;                                                                                                                                                                                                 
     local    create working/return variable       - - - - - - - - - - - - -   tTASK    *x_task   = NULL;                                                                                                                                                                                                 

   REUSE -A-  lay down complex entries                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify adding a few sources                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/tmp/metis.good_stuff"           , 'y'          , &x_source                                          i_equal     0                                                                                                    
     exec     call add                             metis_source_new            "/home/system/yJOBS.description"  , 'y'          , &x_source                                          i_equal     0                                                                                                    
     exec     call add                             metis_source_new            "/home/monkey/arachne"            , 'y'          , &x_source                                          i_equal     0                                                                                                    

   COND  (0)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       verify hooking a task up                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         0             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_equal     0                                                                                                    

   COND       check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.005))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      1  5е#0005ж                 5е#0005ж                    
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       verify unhooking the same one                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     unhook them                          metis_source_unhook         x_task                                                                                                i_equal     0                                                                                                    

   DITTO (0)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.007))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify hooking a different task                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.008))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         3             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_equal     0                                                                                                    

   COND       check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      1  5е#0002ж                 5е#0002ж                    
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       verify hooking another                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.010))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       2             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         5             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_equal     0                                                                                                    

   COND  (1)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.011))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      1  5е#0002ж                 5е#0002ж                    
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     1  5е#0004ж                 5е#0004ж                    
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       attempt to duplicate a hook                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.012))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       2             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         5             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_lesser    0                                                                                                    

   COND       attempt to hook an already hooked task                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.013))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       1             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         5             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_lesser    0                                                                                                    

   COND       attempt to unhook a unhooked task                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.014))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_task_by_index         1             , &x_task                                                                               i_equal     0                                                                                                    
     exec     unhook them                          metis_source_unhook         x_task                                                                                                i_lesser    0                                                                                                    

   DITTO (1)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.015))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify hooking to the same source                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.016))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       2             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call find                            metis_task_by_index         1             , &x_task                                                                               i_equal     0                                                                                                    
     exec     hook them together                   metis_source_hook           x_source      , x_task                                                                                i_equal     0                                                                                                    

   COND  (2)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.017))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      1  5е#0002ж                 5е#0002ж                    
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /home/system/yJOBS.description            0  -еж                      -еж                         
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/metis.good_stuff                     2  5е#0004ж                 5е#0006ж                    
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       attempt to remove a source with tasks                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.018))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       0             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call free                            metis_source_free           &x_source                                                                                             i_lesser    0                                                                                                    

   DITTO (2)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.019))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify freeing a source without tasks                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.020))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_source_by_index       1             , &x_source                                                                             i_equal     0                                                                                                    
     exec     call free                            metis_source_free           &x_source                                                                                             i_equal     0                                                                                                    

   COND  (3)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.021))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     2                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /home/monkey/arachne                      1  5е#0002ж                 5е#0002ж                    
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /tmp/metis.good_stuff                     2  5е#0004ж                 5е#0006ж                    
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     n/a                                                                                                  

   COND       add the deleted one back                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.022))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_source_new            "/home/system/yJOBS.description"  , 'y'          , &x_source                                          i_equal     0                                                                                                    

   DITTO (2)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.023))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify wrapping up                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.024))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call wrap                            metis_source_wrap                                                                                                                 i_equal     0                                                                                                    

   DITTO (3)  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.025))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((02.026))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



# end-of-file.  done, finito, completare, whimper [Пґ···
