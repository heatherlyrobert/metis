
#!/usr/local/bin/koios
#   koios-polos (north star) -- customized c unit testing meta-program and mini-language
#   program under test  : metis_data
#   auto-generated script file converted from a previous script version
#   updated to the most recent version (v21)



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                metis.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (DB) verify changing database name (and on command line)           metis_db_cli                                                                                          ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char       *x_argA [3]  = { "metis_unit"   , "--database", "ruby"       };                                                                                                                                                       
     local    create working variable              - - - - - - - - - - - - -   char       *x_argB [3]  = { "metis_unit"   , "--sources" , "--normal"   };                                                                                                                                                       
     local    create working variable              - - - - - - - - - - - - -   char       *x_argC [4]  = { "metis_unit"   , "--sources" , "--database", "trudy"      };                                                                                                                                           
     local    create working variable              - - - - - - - - - - - - -   char       *x_argD [5]  = { "metis_unit"   , "--sources" , "--database", "andy"      , "--normal"};                                                                                                                                 
     local    create working variable              - - - - - - - - - - - - -   char       *x_argE [3]  = { "metis_unit"   , "--sources" , "--database" };                                                                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   char       *x_argF [4]  = { "metis_unit"   , "--sources" , "--database", "--normal"   };                                                                                                                                         
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  y  23å/var/lib/metis/metis.dbæ                                     

   COND       turn off screen output                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call yURG error file to bitbucket    yURG_err_none                                                                                                                     i_equal     0                                                                                                    

   COND       quick, obvious success                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                "testing.db"                           , 'y'                                                          i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -  10åtesting.dbæ                                                     

   COND       attempt with a null                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                NULL                                   , 'y'                                                          i_lesser    0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -  10åtesting.dbæ                                                  
     get      ... get the last error               yURG_err_last                                                                                                                     s_equal     database <name>, name can not be null                                                       

   COND       verify with fully qualified path                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                "/home/member/poly.db"                 , 'y'                                                          i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -  20å/home/member/poly.dbæ                                           

   COND       attempt with an empty                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                ""                                     , 'y'                                                          i_lesser    0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -  20å/home/member/poly.dbæ                                           
     get      ... get the last error               yURG_err_last                                                                                                                     s_equal     database <name>, name can not be blank/empty                                                

   COND       verify auto-appending suffix                                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                "poly"                                 , 'y'                                                          i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åpoly.dbæ                                                        

   COND       verify auto-appending suffix (second suffix)                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                "poly.dat"                             , 'y'                                                          i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -  11åpoly.dat.dbæ                                                    

   COND       attempt with bad characters                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... call name change                 metis_db_cli                "poly-dat"                             , 'y'                                                          i_lesser    0                                                                                                    
     get      ... get the last error               yURG_err_last                                                                                                                     s_equal     database <name>, name can not have a <-> at character 4                                          
     exec     ... call name change                 metis_db_cli                "poly.dat:"                            , 'y'                                                          i_lesser    0                                                                                                    
     get      ... get the last error               yURG_err_last                                                                                                                     s_equal     database <name>, name can not have a <:> at character 8                                          
     exec     ... call name change                 metis_db_cli                " poly.dat"                            , 'y'                                                          i_lesser    0                                                                                                    
     get      ... get the last error               yURG_err_last                                                                                                                     s_equal     database <name>, name can not have a < > at character 0                                          

   COND       verify args processing                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  3              , x_argA                                                                               i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åruby.dbæ                                                        

   COND       verify args processing, no database arg                            - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  3              , x_argB                                                                               i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åruby.dbæ                                                        

   COND       verify args processing, more args                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  4              , x_argC                                                                               i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   8åtrudy.dbæ                                                        

   COND       verify args processing, args before and after                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  5              , x_argD                                                                               i_equal     0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åandy.dbæ                                                        

   COND       verify args processing, no arg                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  3              , x_argE                                                                               i_lesser    0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åandy.dbæ                                                        

   COND       verify args processing, no arg not content                         - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.009))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     reset yJOBS                          PROG_reset_yjobs                                                                                                                  i_equal     0                                                                                                    
     exec     ... call args                        PROG__args                  4              , x_argF                                                                               i_lesser    0                                                                                                    
     get      ... review name                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  ¬¬¬¬¬¬¬¬¬¬  -   7åandy.dbæ                                                        

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  -  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  t  ========(var)======= 
SCRP          (DB) verify reading and writing the database                       metis_db_write, metis_db_read                                                                         ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify program setup                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     setup the program                    PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     local    create working variable              - - - - - - - - - - - - -   ushort    x_nmajor  =  0;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   ushort    x_nminor  =  0;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   ushort    x_nsource =  0;                                                                                                                                                                                                  
     local    create working variable              - - - - - - - - - - - - -   ushort    x_ntask   =  0;                                                                                                                                                                                                  

   COND       setup testing database                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call name change                     metis_db_cli                "/tmp/metis_test.db"                   , '-'                                                          i_equal     0                                                                                                    
     code     remove files                         - - - - - - - - - - - - -   system ("rm -f /tmp/metis_test.db  > /dev/null");                                                                                                                                                                          
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       -  18å/tmp/metis_test.dbæ                                          

   COND       attempt to read the header of missing database                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   metis_db__open              'r'            , &x_nmajor      , &x_nminor      , &x_nsource     , &x_ntask                          i_lesser    0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       -  18å/tmp/metis_test.dbæ                                          
     echo     ... review project count             - - - - - - - - - - - - -   x_nmajor                                                                                              i_equal     0                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nminor                                                                                              i_equal     0                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_nsource                                                                                             i_equal     0                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_ntask                                                                                               i_equal     0                                                                                                    
     exec     call database close                  metis_db__close                                                                                                                   i_lesser    0                                                                                                    

   COND       attempt to read a missing database                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database read                   metis_db_read                                                                                                                     i_lesser    0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       -  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    0j    0n    0s    0t § N    0j    0n    0s    0t § A    0j    0n    0s    0t 

   COND       verify writing an empty database (necessary)                       - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database write                  metis_db_write                                                                                                                    i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    0j    0n    0s    0t § N    0j    0n    0s    0t § A    0j    0n    0s    0t 

   COND       verify reading header                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   metis_db__open              'r'            , &x_nmajor      , &x_nminor      , &x_nsource     , &x_ntask                          i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : y  ¬¬¬¬¬¬¬¬¬¬  y  18å/tmp/metis_test.dbæ                                          
     echo     ... review project count             - - - - - - - - - - - - -   x_nmajor                                                                                              i_equal     0                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nminor                                                                                              i_equal     0                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_nsource                                                                                             i_equal     0                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_ntask                                                                                               i_equal     0                                                                                                    
     exec     call database close                  metis_db__close                                                                                                                   i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          

   REUSE -B-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify writing a very simple database                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database write                  metis_db_write                                                                                                                    i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    1j    1n    1s    6t § N    1j    1n    1s    6t § A    0j    0n    0s    0t 

   COND       purge the whole system                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call full purge                      metis_data_purge_all                                                                                                              i_equal     0                                                                                                    
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     0                                                                                                    
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     0                                                                                                    
     exec     ... check count                      metis_source_count                                                                                                                i_equal     0                                                                                                    
     exec     ... check count                      metis_task_count                                                                                                                  i_equal     0                                                                                                    

   COND       review all counts                                                  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.004))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    0j    0n    0s    0t § N    1j    1n    1s    6t § A    0j    0n    0s    0t 

   COND       verify reading header                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   metis_db__open              'r'            , &x_nmajor      , &x_nminor      , &x_nsource     , &x_ntask                          i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : y  ¬¬¬¬¬¬¬¬¬¬  y  18å/tmp/metis_test.dbæ                                          
     echo     ... review project count             - - - - - - - - - - - - -   x_nmajor                                                                                              i_equal     1                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nminor                                                                                              i_equal     1                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_nsource                                                                                             i_equal     1                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_ntask                                                                                               i_equal     6                                                                                                    
     exec     call database close                  metis_db__close                                                                                                                   i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          

   COND       verify reading simple database                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database read                   metis_db_read                                                                                                                     i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    1j    1n    1s    6t § N    1j    1n    1s    6t § A    1j    1n    1s    6t 

   COND       check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     1                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  khronos               1 14åkhronos_data.cæ       14åkhronos_data.cæ                                                     
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     n/a                                                                                                  

   COND       check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     1                                                                                                    
     exec     ... entry                            metis_minor_entry           0                                                                                                     s_equal     0  khronos              khronos_data.c        6 21åtesting a source tasæ 17ålast line in fileæ       
     exec     ... entry                            metis_minor_entry           1                                                                                                     s_equal     n/a                                                                                                  

   COND       check source entries                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     1                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /tmp/prog.c                                6 21åtesting a source tasæ 17ålast line in fileæ       
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     n/a                                                                                                  

   COND       check task entries                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_task_count                                                                                                                  i_equal     6                                                                                                    
     exec     ... entry                            metis_task_entry            0                                                                                                     s_equal     0  khronos              khronos_data.c        0 21åtesting a source taskæ     t g 2 # -  y ·  M1GLUb 
     exec     ... entry                            metis_task_entry            1                                                                                                     s_equal     1  khronos              khronos_data.c        1 15åillegal urgencyæ           ? i 1 >    y ·  M1GLUc 
     exec     ... entry                            metis_task_entry            2                                                                                                     s_equal     2  khronos              khronos_data.c        2 11åsample taskæ               s a 4 o ³  y ·  M1GLUd 
     exec     ... entry                            metis_task_entry            3                                                                                                     s_equal     3  khronos              khronos_data.c        3 13ålater in fileæ             y c 8 - -  y ·  M1GLUe 
     exec     ... entry                            metis_task_entry            4                                                                                                     s_equal     4  khronos              khronos_data.c        4 20åfunction level tasksæ      t g 2 - -  y ·  M1GLUg 
     exec     ... entry                            metis_task_entry            5                                                                                                     s_equal     5  khronos              khronos_data.c        5 17ålast line in fileæ         ! v + - -  y ·  M1GLUf 
     exec     ... entry                            metis_task_entry            6                                                                                                     s_equal     n/a                                                                                                                                 

   REUSE -C-  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify writing fuller database                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database write                  metis_db_write                                                                                                                    i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    1j    3n    3s   11t § N    1j    3n    3s   11t § A    0j    0n    0s    0t 

   COND       purge the whole system                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call full purge                      metis_data_purge_all                                                                                                              i_equal     0                                                                                                    
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    0j    0n    0s    0t § N    1j    3n    3s   11t § A    0j    0n    0s    0t 

   COND       verify reading header                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database open                   metis_db__open              'r'            , &x_nmajor      , &x_nminor      , &x_nsource     , &x_ntask                          i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : y  ¬¬¬¬¬¬¬¬¬¬  y  18å/tmp/metis_test.dbæ                                          
     echo     ... review project count             - - - - - - - - - - - - -   x_nmajor                                                                                              i_equal     1                                                                                                    
     echo     ... review file count                - - - - - - - - - - - - -   x_nminor                                                                                              i_equal     3                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_nsource                                                                                             i_equal     3                                                                                                    
     echo     ... review function count            - - - - - - - - - - - - -   x_ntask                                                                                               i_equal     11                                                                                                   
     exec     call database close                  metis_db__close                                                                                                                   i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          

   COND       verify reading fuller database                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((AA.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call database read                   metis_db_read                                                                                                                     i_equal     0                                                                                                    
     get      ... review file                      metis_db__unit              "file"                                                                                                s_equal     DB file          : -  (nil)       y  18å/tmp/metis_test.dbæ                                          
     get      ... review counts                    metis_db__unit              "count"                                                                                               s_equal     DB count         : C    1j    3n    3s   11t § N    1j    3n    3s   11t § A    1j    3n    3s   11t 

   COND       check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     1                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  khronos               3 14åkhronos_data.cæ       12åkhronos.unitæ                                                       
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     n/a                                                                                                  

   COND       check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_minor_entry           0                                                                                                     s_equal     0  khronos              khronos.h             3 18åfirst header entryæ   17åsomething smalleræ       
     exec     ... entry                            metis_minor_entry           1                                                                                                     s_equal     1  khronos              khronos.unit          2 20åbut a good unit taskæ 21åand a second good onæ    
     exec     ... entry                            metis_minor_entry           2                                                                                                     s_equal     2  khronos              khronos_data.c        6 21åtesting a source tasæ 17ålast line in fileæ       
     exec     ... entry                            metis_minor_entry           3                                                                                                     s_equal     n/a                                                                                                  

   COND       check source entries                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_source_count                                                                                                                i_equal     3                                                                                                    
     exec     ... entry                            metis_source_entry          0                                                                                                     s_equal     0  /tmp/prog.c                                6 21åtesting a source tasæ 17ålast line in fileæ       
     exec     ... entry                            metis_source_entry          1                                                                                                     s_equal     1  /tmp/prog.h                                3 18åfirst header entryæ   17åsomething smalleræ       
     exec     ... entry                            metis_source_entry          2                                                                                                     s_equal     2  /tmp/prog.unit                             2 20åbut a good unit taskæ 21åand a second good onæ    
     exec     ... entry                            metis_source_entry          3                                                                                                     s_equal     n/a                                                                                                  

   COND       check task entries                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_task_count                                                                                                                  i_equal     11                                                                                                   
     exec     ... entry                            metis_task_entry            0                                                                                                     s_equal     0  khronos              khronos.h             0 18åfirst header entryæ        y a 1 o -  y ·  M1GLNc 
     exec     ... entry                            metis_task_entry            1                                                                                                     s_equal     1  khronos              khronos.h             1 20åanother header entryæ      y n 4 - -  y ·  M1GLMa 
     exec     ... entry                            metis_task_entry            2                                                                                                     s_equal     2  khronos              khronos.h             2 17åsomething smalleræ         m i q #    y ·  M1GLJf 
     exec     ... entry                            metis_task_entry            3                                                                                                     s_equal     3  khronos              khronos.unit          0 20åbut a good unit taskæ      w l h - -  y ·  M1GLNe 
     exec     ... entry                            metis_task_entry            4                                                                                                     s_equal     4  khronos              khronos.unit          1 21åand a second good oneæ     m - 4 #    y ·  M1GLNk 
     exec     ... entry                            metis_task_entry            5                                                                                                     s_equal     5  khronos              khronos_data.c        0 21åtesting a source taskæ     t g 2 # -  y ·  M1GLUb 
     exec     ... entry                            metis_task_entry            6                                                                                                     s_equal     6  khronos              khronos_data.c        1 15åillegal urgencyæ           ? i 1 >    y ·  M1GLUc 
     exec     ... entry                            metis_task_entry            7                                                                                                     s_equal     7  khronos              khronos_data.c        2 11åsample taskæ               s a 4 o ³  y ·  M1GLUd 
     exec     ... entry                            metis_task_entry            8                                                                                                     s_equal     8  khronos              khronos_data.c        3 13ålater in fileæ             y c 8 - -  y ·  M1GLUe 
     exec     ... entry                            metis_task_entry            9                                                                                                     s_equal     9  khronos              khronos_data.c        4 20åfunction level tasksæ      t g 2 - -  y ·  M1GLUg 
     exec     ... entry                            metis_task_entry            10                                                                                                    s_equal     10 khronos              khronos_data.c        5 17ålast line in fileæ         ! v + - -  y ·  M1GLUf 
     exec     ... entry                            metis_task_entry            11                                                                                                    s_equal     n/a                                                                                                                                 
     exec     ... entry                            metis_task_entry            12                                                                                                    s_equal     n/a                                                                                                                                 

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((05.006))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    






