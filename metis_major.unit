#!/usr/local/bin/koios
#   koios-polos (axis of heaven) unit testing meta-language



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
PREP          include the prototype headers                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
   incl       include public header                metis.h                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   - - - - -   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (MAJOR) verify basic major functionality                                                                                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                                         
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_major = NULL;                                                                                                                                                                                                  

   COND  (0)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     0                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify searches with zero data                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_index        0             , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_cursor       YDLST_HEAD    , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_name         "first"       , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   COND       verify adding a major                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "first"       , 'y'          , &x_major                                                               i_equal     0                                                                                                    

   COND  (1)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     1                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  first                 0  -еж                      -еж                                                                   
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     n/a                                                                                                  
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     n/a                                                                                                  

   COND       verify by index                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_index        0             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_index        1             , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   COND       verify by cursor                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_cursor       YDLST_HEAD    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_cursor       YDLST_NEXT    , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_cursor       YDLST_TAIL    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_cursor       YDLST_PREV    , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   COND       verify by name                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_name         "first"       , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_name         "third"       , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   COND       attempt to add with bad names                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             NULL          , '-'          , &x_major                                                               i_lesser    0                                                                                                    
     exec     call add                             metis_major_new             ""            , '-'          , &x_major                                                               i_lesser    0                                                                                                    

   COND       attempt to add with pointer                                        - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "second"      , '-'          , NULL                                                                   i_lesser    0                                                                                                    
     code     ... set pointer                      - - - - - - - - - - - - -   x_major = 0x123456;                                                                                                                                                                                                        
     exec     call add                             metis_major_new             "second"      , '-'          , &x_major                                                               i_lesser    0                                                                                                    

   DITTO (1)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify adding a couple majors                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "second"      , 'y'          , &x_major                                                               i_equal     0                                                                                                    
     exec     call add                             metis_major_new             "third"       , 'y'          , &x_major                                                               i_equal     0                                                                                                    

   COND  (2)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  first                 0  -еж                      -еж                                                                   
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     1  second                0  -еж                      -еж                                                                           
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     2  third                 0  -еж                      -еж                                                                            
     exec     ... entry                            metis_major_entry           3                                                                                                     s_equal     n/a                                                                                                  

   COND       verify by index                                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_index        -1            , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_index        0             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_index        1             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               
     exec     call find                            metis_major_by_index        2             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call find                            metis_major_by_index        3             , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   COND       verify by cursor forward                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_cursor       YDLST_HEAD    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find (BOOM)                     metis_major_by_cursor       YDLST_PREV    , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_cursor       YDLST_NEXT    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               

   COND       verify by cursor backward                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_cursor       YDLST_TAIL    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call find (BOOM)                     metis_major_by_cursor       YDLST_NEXT    , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_cursor       YDLST_PREV    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               

   COND       verify by cursor current                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_cursor       YDLST_CURR    , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               

   COND       verify by name                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find (null name)                metis_major_by_name         NULL          , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find                            metis_major_by_name         "first"       , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     first                                                                                                
     exec     call find                            metis_major_by_name         "third"       , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call find                            metis_major_by_name         "tobasco"     , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find (empty name)               metis_major_by_name         ""            , &x_major                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    
     exec     call find (no return pointer)        metis_major_by_name         "first"       , NULL                                                                                  i_lesser    0                                                                                                    

   COND       attempt to re-add a major                                          - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "second"      , 'y'          , &x_major                                                               i_equal     1                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               

   DITTO (2)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify wrapping up                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call wrap                            metis_major_cleanse                                                                                                               i_equal     0                                                                                                    

   DITTO (0)  check entries                                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SHARED   -a-  (MAJOR) verify extra safeties on freeing                                                                                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_1st   = NULL;                                                                                                                                                                                                  
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_2nd   = NULL;                                                                                                                                                                                                  
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_3rd   = NULL;                                                                                                                                                                                                  
     local    create working/return variable       - - - - - - - - - - - - -   tMINOR   *x_minor = NULL;                                                                                                                                                                                                  

   COND       verify adding majors                                               - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_major_new             "first"       , 'y'          , &x_1st                                                                 i_equal     0                                                                                                    
     exec     call add                             metis_major_new             "second"      , 'y'          , &x_2nd                                                                 i_equal     0                                                                                                    
     exec     call add                             metis_major_new             "third"       , 'y'          , &x_3rd                                                                 i_equal     0                                                                                                    

   COND       verify adding a minor                                              - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call add                             metis_minor_new             x_1st         , "super"       , 'y'          , &x_minor                                               i_equal     0                                                                                                    
     exec     call add                             metis_minor_new             x_3rd         , "excellent"   , 'y'          , &x_minor                                               i_equal     0                                                                                                    
     exec     call add                             metis_minor_new             x_1st         , "totally"     , 'y'          , &x_minor                                               i_equal     0                                                                                                    

   COND       check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  first                 2  5еsuperж                 7еtotallyж                                                            
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     1  second                0  -еж                      -еж                                                                           
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     2  third                 1  9еexcellentж             9еexcellentж                                                                   
     exec     ... entry                            metis_major_entry           3                                                                                                     s_equal     n/a                                                                                                  

   COND       check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_minor_entry           0                                                                                                     s_equal     0  third                excellent             0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           1                                                                                                     s_equal     1  first                super                 0  -еж                      -еж                        
     exec     ... entry                            metis_minor_entry           2                                                                                                     s_equal     2  first                totally               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           3                                                                                                     s_equal     n/a                                                                                                  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SHARED   -b-  (MAJOR) verify results of freeing                                                                                                                                        ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     2                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  first                 2  5еsuperж                 7еtotallyж                                                            
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     1  third                 1  9еexcellentж             9еexcellentж                                                                   
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     n/a                                                                                                  

   COND       check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_minor_entry           0                                                                                                     s_equal     0  third                excellent             0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           1                                                                                                     s_equal     1  first                super                 0  -еж                      -еж                        
     exec     ... entry                            metis_minor_entry           2                                                                                                     s_equal     2  first                totally               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           3                                                                                                     s_equal     n/a                                                                                                  



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (MAJOR) verify extra safeties on freeing                                                                                                                                 ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                                         
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_major = NULL;                                                                                                                                                                                                  

   REUSE -a-  lay down entries                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify freeing of empty major                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_name         "second"      , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     second                                                                                               
     exec     call free                            metis_major_free            &x_major                                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major                                                                                               p_null      0                                                                                                    

   REUSE -b-  verify entries                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       attempt freeing of a used major                                    - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_name         "third"       , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call free                            metis_major_free            &x_major                                                                                              i_lesser    0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                

   REUSE -b-  verify entries                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (MAJOR) verify purge also has safeties on freeing                                                                                                                        ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                                         
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_major = NULL;                                                                                                                                                                                                  

   REUSE -a-  lay down entries                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify freeing of empty major                                      - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call wrap                            metis_major_cleanse                                                                                                               i_equal     0                                                                                                    

   REUSE -b-  verify entries                                                     - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



#23456789-12  123456789-123456789-123456789-12345  123456789-123456789-123456  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-  123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-123456789-  123456789-123456789- 
#==(verb)===  ===========(description)===========  =====(function)===========  ========================(arguments)=================================================================  ==(test)==  ==========================(results)=================================================================  ========(var)======= 
SCRP          (MAJOR) verify purging tasks from major                                                                                                                                  ((01.---))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       initialize the testing environment                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.001))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     start testing                        PROG__unit_quiet                                                                                                                  i_equal     0                                                                                                    
     code     turn on sort tracking                - - - - - - - - - - - - -   yURG_name ("sort", YURG_ON);                                                                                                                                                                                                         
     local    create working/return variable       - - - - - - - - - - - - -   tMAJOR   *x_major = NULL;                                                                                                                                                                                                  

   REUSE -A-  lay down complex entries                                           - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       verify purging a major                                             - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_index        2             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call purge                           metis_major_purge_tasks     x_major                                                                                               i_equal     0                                                                                                    

   COND  (0)  check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_major_count                                                                                                                 i_equal     3                                                                                                    
     exec     ... entry                            metis_major_entry           0                                                                                                     s_equal     0  first                 2  5еsuperж                 7еtotallyж                                                            
     exec     ... entry                            metis_major_entry           1                                                                                                     s_equal     1  second                2  7еawesomeж               7еbestestж                                                                    
     exec     ... entry                            metis_major_entry           2                                                                                                     s_equal     2  third                 3  9еexcellentж             7еwhupassж                                                                     
     exec     ... entry                            metis_major_entry           3                                                                                                     s_equal     n/a                                                                                                  

   COND  (1)  check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_minor_count                                                                                                                 i_equal     7                                                                                                    
     exec     ... entry                            metis_minor_entry           0                                                                                                     s_equal     0  second               awesome               3  5е#0001ж                 5е#0003ж                                                  
     exec     ... entry                            metis_minor_entry           1                                                                                                     s_equal     1  third                bestest               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           2                                                                                                     s_equal     2  second               bestest               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           3                                                                                                     s_equal     3  third                excellent             0  -еж                      -еж                                                        
     exec     ... entry                            metis_minor_entry           4                                                                                                     s_equal     4  first                super                 2  5е#0005ж                 5е#0006ж                   
     exec     ... entry                            metis_minor_entry           5                                                                                                     s_equal     5  first                totally               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           6                                                                                                     s_equal     6  third                whupass               0  -еж                      -еж                                                       
     exec     ... entry                            metis_minor_entry           7                                                                                                     s_equal     n/a                                                                                                  

   COND  (2)  check task entries                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     ... check count                      metis_task_count                                                                                                                  i_equal     5                                                                                                    
     exec     ... entry                            metis_task_entry            0                                                                                                     s_equal     0  first                super                 0  5е#0005ж                     · · · · ·  · ·  ·                                         
     exec     ... entry                            metis_task_entry            1                                                                                                     s_equal     1  first                super                 1  5е#0006ж                     · · · · ·  · ·  ·                                         
     exec     ... entry                            metis_task_entry            2                                                                                                     s_equal     2  second               awesome               0  5е#0001ж                     · · · · ·  · ·  ·                                         
     exec     ... entry                            metis_task_entry            3                                                                                                     s_equal     3  second               awesome               1  5е#0002ж                     · · · · ·  · ·  ·                                         
     exec     ... entry                            metis_task_entry            4                                                                                                     s_equal     4  second               awesome               2  5е#0003ж                     · · · · ·  · ·  ·                                         
     exec     ... entry                            metis_task_entry            5                                                                                                     s_equal     n/a                                                                                                                                 
     exec     ... entry                            metis_task_entry            6                                                                                                     s_equal     n/a                                                                                                                                 

   COND       verify purging from an empty major                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     call find                            metis_major_by_index        2             , &x_major                                                                              i_equal     0                                                                                                    
     echo     ... check return                     - - - - - - - - - - - - -   x_major->name                                                                                         s_equal     third                                                                                                
     exec     call purge                           metis_major_purge_tasks     x_major                                                                                               i_equal     0                                                                                                    

   DITTO (0)  check major entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   DITTO (1)  check minor entries                                                - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   DITTO (2)  check task entries                                                 - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.002))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  

   COND       complete testing                                                   - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -   ((01.003))  - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -  
     exec     stop testing                         PROG__unit_end                                                                                                                    i_equal     0                                                                                                    



# end-of-file.  done, finito, completare, whimper [Пґ···
